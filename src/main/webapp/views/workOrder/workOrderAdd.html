<!-- head -->
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-md-12">
        <ol class="breadcrumb">
            <li><a>主页</a></li>
            <li><a>代理商工单</a></li>
            <li class="active"><strong>新增工单
            </strong></li>
        </ol>
    </div>
</div>

<!-- content-->
<div class="wrapper wrapper-content animated fadeIn"
     ng-controller="workOrderAddCtrl">
    <form class="form-horizontal" id="form1" name="horizontal">
        <div style="background: #fff; padding:50px 0;">
            <div class="form-group">
                <label class="col-sm-2 control-label"><i class="red_req">*</i>工单类型：</label>
                <div class="col-sm-2">
                    <select  name="workTypeId" id="autocomplete-select1" required
                             ng-model="info.workTypeId" ng-options="x.value as x.text for x in nameSelect" ng-change="showDealProcess()"
                             style="width: 100%" chosen chosen-data="nameSelect" >
                    </select>
                </div>
                <div class="req_mesg" ng-show="horizontal.workTypeId.$dirty && horizontal.workTypeId.$invalid">
                    <span ng-show="horizontal.workTypeId.$error.required">工单类型不能为空</span>
                </div>
            </div>
            <div class="form-group" ng-if="info.workTypeId">
                <label class="col-sm-2 control-label">处理流程：</label>
                <div class="col-sm-10">
                    <span >{{info.dealProcessName}}</span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label"><i class="red_req">*</i>接收代理商：</label>
                <div class="col-sm-2">
                    <select name="autocomplete-select" id="autocomplete-select" ng-model="info.receiveAgentNode" chosen-data="agentList"
                            ng-options="x.value as x.text for x in agentList" style="width: 100%" chosen  chosen-keyup="getAgentList">
                    </select>
                </div>
                <div class="req_mesg" ng-show="horizontal.receiveAgentNode.$dirty && horizontal.receiveAgentNode.$invalid">
                    <span ng-show="horizontal.receiveAgentNode.$error.required">接收代理商不能为空</span>
                </div>
            </div>
            <div class="form-group" >
                <label class="col-sm-2 control-label" >是否加急：</label>
                <div class="col-sm-6" style="width: 400px;">
                    <select class="form-control" ng-model="info.urgeStatus" name="urgeStatus"  ng-options="x.value as x.text for x in urgeStatusSelect"/>
                </div>
            </div>
            <div class="form-group" ng-if="info.urgeStatus == 1">
                <label class="col-sm-2 control-label" ><i class="red_req">*</i>截止回复：</label>
                <div class="col-sm-6" style="width: 400px;">
                    <select class="form-control" ng-model="info.endReplyDays" name="endReplyDays" required  ng-options="x.value as x.text for x in endReplyDaysSelect"/>
                </div>
                <div class="req_mesg" ng-show="horizontal.endReplyDays.$dirty && horizontal.endReplyDays.$invalid">
                    <span ng-show="horizontal.endReplyDays.$error.required">截止回复不能为空</span>
                </div>
            </div>
            <div class="form-group" >
                <label class="col-sm-2 control-label" ><i class="red_req">*</i>工单内容：</label>
                <div class="col-sm-6" style="width: 400px;">
                    <textarea ng-model="info.workContent" maxlength="300" cols="50" rows="10" name="workContent" required></textarea>
                </div>
                <div class="req_mesg" ng-show="horizontal.workContent.$dirty && horizontal.workContent.$invalid">
                    <span ng-show="horizontal.workContent.$error.required">工单内容不能为空</span>
                </div>
            </div>
            <div class="form-group" >
                <label class="col-sm-2 control-label" style="float: left;">添加附件：</label>
                <div class="col-sm-3 checkbox ">
                    <input type="file" nv-file-select="" ng-model="fileSelect" uploader="uploader" multiple/>
                    <table class="table">
                        <tbody>
                        <tr ng-repeat="item in uploader.queue">
                            <td>
                                <strong>{{ item.file.name }}</strong>
                            </td>
                            <td nowrap>
                                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                    <span class="glyphicon glyphicon-trash"></span>删除
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <label style="margin-top:7px;color: red">注:最多可上传15个文件,每个文件小于10M</label>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label"></label>
                <div class="col-sm-6">
                    <button ng-disabled="horizontal.$invalid || submitting" class="btn btn-primary" type="button" ng-click='commitInfo()'>提交</button>
                    <button class="btn btn-primary8" type="button" ui-sref="workOrder.workOrderManager" >返回</button>
                </div>
            </div>
        </div>
    </form>

</div>

